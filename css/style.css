/* --- Réglages de base --- */
body {
    /* Assure que le body prend au moins toute la hauteur de l'écran */
    min-height: 100vh; 
    
    /* Police de base, pour l'exemple */
    font-family: Arial, sans-serif; 
    
    /* Important : garde le margin à 0 pour que le fond colle aux bords */
    margin: 0; 

    /* --- 1. L'IMAGE DE FOND --- */
    
    /* Chemin vers ton image. 
       '../' signifie "remonter d'un dossier" 
       (de 'css' à 'PROJET-SERRASIKA') 
    */
    background-image: url('../assets/images/fond1.png');
    
    /* L'image couvre tout l'écran, sans se déformer */
    background-size: cover;
    
    /* L'image est centrée */
    background-position: center;
    
    /* L'image reste fixe quand on scrolle (important pour un fond) */
    background-attachment: fixed; 
    
    /* Au cas où l'image ne charge pas, on met une couleur de fond */
    background-color: #333;

    /* Nécessaire pour que la couche de superposition fonctionne */
    position: relative;
    z-index: 1;
}

/* --- 2. LA COUCHE D'EFFET (FLOU + SOMBRE) --- */
body::before {
    /* Crée un "pseudo-élément" vide qui couvrira tout le body */
    content: "";
    position: fixed; /* MODIFIÉ : "absolute" -> "fixed" */
    top: 0; 
    left: 0;
    width: 100%;
    height: 100%;
    
    /* EFFET 1: Assombrir 
       (Couleur noire avec 60% d'opacité. Tu peux jouer avec '0.6') 
    */
    background-color: rgba(0, 0, 0, 0.65); 
    
    /* EFFET 2: Flouter 
       (Flou de 8px. Tu peux jouer avec '8px') 
    */
    backdrop-filter: blur(2px);
    
    /* S'assure que cette couche reste DERRIÈRE ton contenu (titres, widgets...) */
    z-index: -1; 
}


/* --- 3. TEST DE CONTENU (pour voir l'effet) --- */
/* Juste pour que notre H1 de test soit visible */
header {
    color: white;
    padding: 20px;
    text-align: center;
    font-size: 2em;
    /* On ajoute une légère ombre au texte pour qu'il ressorte encore mieux */
    text-shadow: 0px 2px 5px rgba(0, 0, 0, 0.5);
}

/* --- ÉTAPE 2 : LA GRILLE ET LES WIDGETS (Version Finale PRO) --- */

/* 1. Le conteneur de la grille */
.dashboard-grid {
    display: grid; /* On active le mode Grille */
    
    /* On DÉFINIT nos colonnes : 2 colonnes flexibles + 1 colonne fixe */
    grid-template-columns: 1fr 1fr 1fr; /* 3 colonnes de taille égale */
    
    /* On DÉFINIT nos lignes : une 1ère auto, une 2e flexible */
    grid-template-rows: auto 1fr; 
    
    gap: 20px; /* Espace entre les widgets */
    padding: 0 20px 20px 20px;
    
    /* On force la grille à prendre toute la hauteur restante */
    height: calc(100vh - 100px); /* 100vh - (padding + hauteur du header) */
    
}

/* 2. Le style "Verre Dépoli" (Glassmorphism) pour les widgets */
.widget {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 8px 32px 0 rgba(0, 0, 0, 0.3);
    border-radius: 15px;
    padding: 25px;
    color: white;
    
    /* On ajoute ça pour que le contenu s'étire (ex: le graphique) */
    display: flex;
    flex-direction: column;
}

/* 3. Style pour les titres des widgets (inchangé) */
.widget h2 {
    margin-top: 0;
    font-size: 1.5em;
    border-bottom: 1px solid rgba(255, 255, 255, 0.3);
    padding-bottom: 15px;
    margin-bottom: 20px;
    display: flex;
    align-items: center;
}

.widget h2 i {
    margin-right: 15px;
    width: 30px;
}

/* --- 4. LE PLACEMENT EXACT DE CHAQUE WIDGET --- */

#status-widget {
    grid-area: 1 / 1 / 2 / 2; /* Ligne 1, Colonne 1 */
}

#controls-widget {
    grid-area: 1 / 2 / 2 / 3; /* Ligne 1, Colonne 2 */
}

#charts-widget {
    grid-area: 1 / 3 / 3 / 4; /* Ligne 1, Colonne 3 ET s'étend jusqu'à la ligne 3 */
    /* C'est notre grande colonne de droite */
}

#kids-widget {
    grid-area: 2 / 1 / 3 / 3; /* Ligne 2, Colonne 1 ET s'étend jusqu'à la colonne 3 */
    /* C'est notre grand bloc du bas */
}


/* 5. Le canvas du graphique (on veut qu'il remplisse son widget) */
#temperature-chart {
    flex-grow: 1; /* Le canvas grandit pour remplir l'espace */
    width: 100% !important;
    height: auto !important;
}

/* On change 900px en 700px si tu veux forcer l'affichage "Large" sur tablette portrait */
@media (max-width: 900px) { 

    .dashboard-grid {
        /* On passe à 1 seule colonne */
        grid-template-columns: 1fr; 
        grid-template-rows: auto;
        height: auto;
    }

    /* On remet l'ordre naturel des widgets */
    #status-widget,
    #controls-widget,
    #charts-widget,
    #kids-widget {
        grid-area: auto;
        min-height: auto; /* On laisse la hauteur s'adapter */
    }

    /* --- LE FIX POUR LES GRAPHIQUES INVISIBLES --- */
    #temperature-chart,
    #soil-humidity-chart {
        /* On force une hauteur minimale sur mobile sinon ils s'écrasent */
        min-height: 250px !important; 
        height: 250px !important;
    }
}


/* --- ÉTAPE 3 : Style du Widget "État Actuel" (Version Compacte) --- */

.sensor-data-grid {
    display: grid;
    grid-template-columns: 1fr 1fr; 
    gap: 15px; /* Réduit de &20px à 15px */
    padding-top: 5px; /* Réduit de 10px à 5px */
}

.sensor-item {
    background: rgba(0, 0, 0, 0.15);
    border-radius: 10px;
    padding: 10px; /* Réduit de 15px à 10px */
    text-align: center;
}

/* --- NOUVELLE RÈGLE pour les icônes graphiques --- */
.sensor-icon {
    width: 40px; /* On leur donne une taille fixe (tu peux ajuster 40px) */
    height: 40px;
    margin-bottom: 8px;
}


.sensor-label {
    display: block;
    font-size: 0.8em; /* Réduit de 0.9em à 0.8em */
    font-weight: 250;
    margin-bottom: 3px; /* Réduit de 5px à 4px */
}

/* Chiffre plus petit */
.sensor-value {
    display: block;
    font-size: 1.7em; /* Réduit de 2.5em à 1.9em */
    font-weight: 590;
    line-height: 1.0;
}

/* Unité plus petite */
.sensor-unit {
    display: block;
    font-size: 0.6em; /* Réduit de 0.9em à 0.8em */
    font-weight: 250;
    color: rgba(255, 255, 255, 0.7);
}

/* Le 5ème item (UV) s'étale sur 2 colonnes */
#status-widget .sensor-item:last-child {
    grid-column: span 2;
}

/* --- (Couleurs) --- */
/* (Les règles de couleur ne changent pas, tu peux les laisser) */
.color-temp    { --sensor-color: #f3f3f3; }
.color-humidity{ --sensor-color: #ffffff; }
.color-soil    { --sensor-color: #ffffff; }
.color-lux     { --sensor-color: #ffffff; }
.color-uv      { --sensor-color: #ffffff; }

.sensor-item > i,
.sensor-value {
    color: var(--sensor-color, white); 
}

/* --- ÉTAPE 4 (Suite) : Style pour 2 graphiques --- */

/* Style pour les nouveaux titres H3 */
.chart-title {
    font-size: 1em;
    font-weight: 600;
    color: rgba(255, 255, 255, 0.8);
    margin: 15px 0 5px 0; /* Espace au-dessus, petit espace en-dessous */
    text-align: center;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 5px;
}

/* On modifie l'ancienne règle :
  On applique le 'flex-grow' aux DEUX graphiques
  pour qu'ils se partagent la hauteur.
*/
#temperature-chart,
#soil-humidity-chart {
    flex-grow: 1; 
    width: 100% !important;
    min-height: 0; /* <--- LA SOLUTION */
}


/* --- ÉTAPE 5 : Style du Widget "Enfants" --- */

.kids-content {
    display: grid;
    /* On crée 2 colonnes : 1 pour les besoins, 1 pour le fun fact */
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-top: 10px;
}

/* Le titre "Plante de la semaine" prend toute la largeur */
.plant-of-the-week {
    grid-column: span 2; /* S'étale sur 2 colonnes */
    text-align: center;
    background: rgba(0, 0, 0, 0.15);
    padding: 10px;
    border-radius: 8px;
}

.plant-of-the-week h3 {
    margin: 0;
    font-size: 1.2em;
}
.plant-of-the-week h3 span {
    font-weight: bold;
}

/* Style des blocs "Besoins" et "Fun Fact" */
.plant-needs, .fun-fact {
    background: rgba(0, 0, 0, 0.15);
    padding: 15px;
    border-radius: 8px;
}

.kids-content h4 {
    margin-top: 0;
    margin-bottom: 15px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    padding-bottom: 10px;
    font-size: 1.1em;
}

/* Style pour la section "Besoins" */
.need-item {
    display: flex; /* Aligne les éléments */
    align-items: center;
    margin-bottom: 10px;
    font-size: 1.1em;
}
.need-label {
    font-weight: 600;
    width: 60px; /* Aligne "Soleil" et "Eau" */
}
.need-visual {
    font-size: 1.2em;
    margin: 0 10px;
}
.need-desc {
    font-style: italic;
    color: rgba(255, 255, 255, 0.8);
}

/* Style pour la section "Fun Fact" */
.fun-fact p {
    margin: 0;
    font-size: 1em;
    font-style: italic;
    line-height: 1.4;
}

/* --- Responsive pour le widget enfant --- */
@media (max-width: 500px) {
    .kids-content {
        /* Sur petit écran, on repasse à 1 seule colonne */
        grid-template-columns: 1fr;
    }
    .plant-of-the-week {
        grid-column: span 1; /* Annule le span */
    }
}

/* --- ÉTAPE 6 : Style du Widget "Contrôles" --- */

.controls-grid {
    display: flex;
    flex-direction: column;
    gap: 7px; /* Espace entre chaque groupe de contrôle */
}

.control-group {
    background: rgba(0, 0, 0, 0.15);
    padding: 12px;
    border-radius: 8px;
}

.control-group h4 {
    margin-top: 0;
    margin-bottom: 12px;
    font-size: 1.0em;
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    padding-bottom: 7px;
    display: flex;
    align-items: center;
}
.control-group h4 i {
    margin-right: 10px;
    width: 20px;
}

/* Ligne pour les "toggle" (ex: "Mode Auto" --- [O] ) */
.control-row {
    display: flex;
    justify-content: space-between; /* Met le label à gauche, le switch à droite */
    align-items: center;
    margin-bottom: 15px;
}
.control-label {
    font-size: 1em;
    font-weight: 500;
}

/* Boutons de contrôle (ex: "Forcer l'arrosage") */
.control-btn {
    width: 100%; /* Prend toute la largeur */
    background-color: rgba(255, 255, 255, 0.8); /* Blanc semi-transparent */
    color: #333; /* Texte sombre */
    border: none;
    padding: 7px;
    border-radius: 5px;
    cursor: pointer;
    font-size: 0.9em;
    font-weight: bold;
    margin-top: 5px;
    transition: all 0.2s ease;
}
.control-btn:hover {
    background-color: white; /* Devient blanc opaque au survol */
}
.control-btn:active {
    transform: scale(0.98); /* Effet d'appui */
}
.control-btn i {
    margin-right: 8px;
}


/* --- LE STYLE DU "TOGGLE SWITCH" DYNAMIQUE --- */

.toggle-switch {
    position: relative;
    display: inline-block;
    width: 42px; /* Largeur du switch */
    height: 22px; /* Hauteur du switch */
}
.toggle-switch input {
    opacity: 0;
    width: 0;
    height: 0;
}

/* Le fond du switch (la glissière) */
.slider {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.3); /* Couleur "OFF" */
    border-radius: 22px;
    transition: 0.3s;
}

/* Le cercle qui bouge */
.slider::before {
    position: absolute;
    content: "";
    height: 18px;
    width: 18px;
    left: 2.5px;
    bottom: 2.5px;
    background-color: white;
    border-radius: 50%;
    transition: 0.3s;
}

/* Quand on clique (état "ON") */
input:checked + .slider {
    background-color: #4CAF50; /* Vert "ON" */
}
/* Mouvement du cercle */
input:checked + .slider::before {
    transform: translateX(20px); /* Mouvement vers la droite */
}